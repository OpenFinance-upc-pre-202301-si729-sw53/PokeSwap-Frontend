<div *ngIf="success" class="last-op">
    Last Operation ID: {{success}}
</div>

<mat-card
  *ngIf="data && exchange && token; else elseBlock2"
  class="example-card"
>
  <mat-card-header>
    <mat-card-title-group>
      <mat-card-title>Exchange Data:</mat-card-title>
      <mat-card-subtitle
        >You're exchanging with the platform and the transaction will be instant
        regardless of the method</mat-card-subtitle
      >
    </mat-card-title-group>
  </mat-card-header>
  <mat-card-content>
    <br />
    Exchange Info:<br />
    Name: {{ exchange.name }}<br />
    Minimium Deposit: {{ exchange.minimunDesposit }}<br />
    Comission: {{ exchange.comision }}<br />
    Wait Time: {{ exchange.time }}<br />
    Token Details:<br />
    Name: {{ token.name }}<br />
    Quantity: {{ token.balance }}<br />
    Exchange Rate: {{ token.exchange_rate }}<br />
    Max Exchange Amount (PEN): S./{{ quantity }} Max Exchange Amount (USD): ${{
      quantity
    }}
  </mat-card-content>
</mat-card>

<ng-template #elseBlock2>
  <h1>Please login again.</h1>
</ng-template>

<div *ngIf="data && exchange && token; else elseBlock" class="allSwap">
  <form (submit)="onSubmit()" #exchangeForm="ngForm">
    <mat-card class="swapper">
      <mat-card-title class="title-text"
        >Swap Coins <mat-icon>compare_arrows</mat-icon>
      </mat-card-title>
      <mat-card>
        <mat-card-subtitle>From</mat-card-subtitle>
        <div class="converters-flex">
          <mat-form-field>
            <mat-label>Quantity (Amount)</mat-label>
            <input
              matInput
              required
              type="number"
              [(ngModel)]="token.balance"
              ng-change="myFunc()"
              [ngModelOptions]="{ standalone: true }"
            />
          </mat-form-field>
          <div class="percentage">
            <img
              class="coin-image"
              src="https://i.imgur.com/kLVXBbm.png"
              width="20px"
              height="20px"
              alt="Coin"
            />
            <mat-form-field>
              <mat-label>Coin</mat-label>
              <mat-select required>
                <mat-option *ngFor="let tkn of tokenArr" [value]="tkn.name">
                  {{ tkn.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
            <mat-card-subtitle class="converters-flex">
              Example Value: $ 120.20</mat-card-subtitle
            >
          </div>
        </div>
      </mat-card>
      <br />
      <mat-card>
        <mat-card-subtitle>To</mat-card-subtitle>
        <div class="converters-flex">
          <mat-form-field>
            <mat-label>Total Value</mat-label>
            <input
              matInput
              autocomplete="off"
              type="number"
              disabled
              [value]="token.balance * token.exchange_rate * excV.value"
            />
          </mat-form-field>
          <div class="percentage">
            <img
              class="coin-image"
              src="https://i.imgur.com/kLVXBbm.png"
              width="20px"
              height="20px"
              alt="Coin"
            />
            <mat-form-field>
              <mat-label>Coin</mat-label>
              <mat-select required [(ngModel)]="excV" [ngModelOptions]="{ standalone: true }">
                <mat-option *ngFor="let exc of excArr" [value]="exc">{{
                  exc.name
                }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
            <mat-card-subtitle class="converters-flex"></mat-card-subtitle>
          </div>
        </div>
      </mat-card>
      <div class="slippage-flex">
        <mat-card-subtitle class="slippage-text"
          >Slippage Tolerance</mat-card-subtitle
        >
        <mat-card-subtitle class="slippage-text percentage"
          >1%</mat-card-subtitle
        >
      </div>
      <mat-card-actions>
        <button
          type="submit"
          class="swap-button"
          mat-raised-button
          color="primary"
        >
          SWAP
        </button>
      </mat-card-actions>
    </mat-card>
  </form>
</div>

<ng-template #elseBlock>
  <h1>Please follow all the steps.</h1>
  <p>Go to portfolio for more information!!!</p>
</ng-template>
